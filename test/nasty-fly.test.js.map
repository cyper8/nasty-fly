{"version":3,"file":"nasty-fly.test.js","sourceRoot":"","sources":["nasty-fly.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { html, fixture, expect } from '@open-wc/testing';\n\nimport { NastyFly } from '../src/NastyFly.js';\nimport '../src/nasty-fly.js';\n\ndescribe('NastyFly element', () => {\n  it('exists', async () => {\n    const NastyFlyElementInstance = await fixture<NastyFly>(\n      html`<nasty-fly></nasty-fly>`\n    );\n    expect(NastyFlyElementInstance).to.exist;\n    // expect(NastyFlyElementInstance).to.be.accessible();\n  });\n\n  it('has fly', async () => {\n    const aFly: NastyFly = await fixture<NastyFly>(\n      html`<nasty-fly></nasty-fly>`\n    );\n    const theFly: HTMLDivElement | null =\n      aFly.shadowRoot!.querySelector<HTMLDivElement>('div.муха');\n    expect(theFly).to.be.instanceOf(HTMLDivElement);\n  });\n\n  it('sits', async () => {\n    const aFly: NastyFly = await fixture<NastyFly>(\n      html`<nasty-fly></nasty-fly>`\n    );\n    expect(aFly.стан).equals('сидить');\n  });\n\n  it('looks like a fly', async () => {\n    const aFly: NastyFly = await fixture<NastyFly>(\n      html`<nasty-fly></nasty-fly>`\n    );\n    const theFly: HTMLDivElement | null =\n      aFly.shadowRoot!.querySelector<HTMLDivElement>('div.муха');\n    await aFly.updateComplete;\n    expect(window.getComputedStyle(theFly!).backgroundImage).to.include(\n      'fly.svg'\n    );\n  });\n\n  it('is properly styled', async () => {\n    const aFly: NastyFly = await fixture<NastyFly>(\n      html`<nasty-fly></nasty-fly>`\n    );\n    const theFly: HTMLDivElement | null =\n      aFly.shadowRoot!.querySelector<HTMLDivElement>('div.муха');\n    expect(window.getComputedStyle(theFly!).backgroundColor).not.equal('pink');\n  });\n\n  it('can fly', done => {\n    fixture<NastyFly>(\n      html`<nasty-fly liveliness=\"0\" @літає=${() => done()}></nasty-fly>`\n    ).then(aFly => {\n      aFly.click();\n    });\n  });\n\n  it('looks like a flying fly, while flying', async () => {\n    const aFly: NastyFly = await fixture<NastyFly>(\n      html`<nasty-fly liveliness=\"0\"></nasty-fly>`\n    );\n    const theFly: HTMLDivElement | null =\n      aFly.shadowRoot!.querySelector<HTMLDivElement>('div.муха');\n    aFly.click();\n    await new Promise<void>(resolve => {\n      aFly.addEventListener('літає', () => {\n        expect(window.getComputedStyle(theFly!).backgroundImage).to.include(\n          'fly-flies.svg'\n        );\n        resolve();\n      });\n    });\n  });\n\n  // TODO: Cannot test audio playback for now\n  // xit('buzzes, while flying', (done) => {\n  //   fixture<NastyFly>(html`<nasty-fly liveliness=0></nasty-fly>`)\n  //     .then(aFly => {\n  //       aFly.addEventListener('літає', () => {\n  //         expect(aFly.buzz).to.be.instanceOf(HTMLAudioElement);\n  //         expect(aFly.buzz.src).to.include('buzz.mp3');\n  //         expect(aFly.buzz.paused).to.be.false;\n  //         done();\n  //       });\n  //       aFly.addEventListener('readytofly', () => {\n  //         aFly.click();\n  //       })\n  //     });\n  // });\n\n  // TODO: test liveliness changes effects\n\n  it('can be smashed', done => {\n    fixture<NastyFly>(html`<nasty-fly liveliness=\"0\"></nasty-fly>`).then(\n      aFly => {\n        aFly.addEventListener('літає', () => {\n          aFly.click();\n        });\n        aFly.addEventListener('смерть', () => {\n          done();\n        });\n        aFly.addEventListener('readytofly', () => {\n          aFly.click();\n        });\n      }\n    );\n  });\n\n  it('flies until eventually sits herself down', done => {\n    fixture<NastyFly>(html`<nasty-fly liveliness=\"0\"></nasty-fly>`).then(\n      aFly => {\n        aFly.addEventListener('readytofly', () => aFly.click());\n        aFly.addEventListener('літає', () => {\n          aFly.addEventListener('сидить', () => {\n            done();\n          });\n        });\n      }\n    );\n  });\n});\n"]}